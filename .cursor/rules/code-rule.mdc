---
globs: *.tsx,*.ts
alwaysApply: false
---

# Prism Code Agent é¡¹ç›®è§„èŒƒ

## ğŸ“ ç›®å½•ç»“æ„è§„èŒƒ

### æ ¸å¿ƒç›®å½•è¯´æ˜

- `app/` - Next.js åº”ç”¨å±‚ï¼ŒåŒ…å«é¡µé¢ã€API è·¯ç”±å’Œç»„ä»¶
  - `components/` - React ç»„ä»¶ï¼ŒæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ **(éµå¾ªé¢†åŸŸé©±åŠ¨è®¾è®¡)**
    - `{feature}/` - åŠŸèƒ½æ¨¡å—ç»„ä»¶ **(æŒ‰ä¸šåŠ¡é¢†åŸŸåˆ†ç»„)**
    - `ui/` - é€šç”¨å¯å¤ç”¨ UI ç»„ä»¶ **(æ— ä¸šåŠ¡é€»è¾‘çš„çº¯ UI ç»„ä»¶)**
  - `api/` - API è·¯ç”±å¤„ç†å™¨
  - `pages/` - é¡µé¢çº§ç»„ä»¶å’Œè·¯ç”±
- `lib/` - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘åº“ï¼ŒåŒ…å«å¯å¤ç”¨çš„æœåŠ¡å’Œå·¥å…·
- `hooks/` - è‡ªå®šä¹‰ React Hooksï¼Œåˆ†ç¦»ä¸šåŠ¡é€»è¾‘ **(é€»è¾‘å±‚)**
- `config/` - é…ç½®æ–‡ä»¶ï¼Œå¦‚æ•°æ®åº“è¿æ¥ã€API é…ç½®ç­‰
- `types/` - å…¨å±€ TypeScript ç±»å‹å®šä¹‰
- `docs/` - é¡¹ç›®æ–‡æ¡£
- `public/` - é™æ€èµ„æºæ–‡ä»¶

### Agent æœåŠ¡æ¶æ„ (lib/services/agent/)

- `core/` - æ ¸å¿ƒå®ç°
  - `agent.ts` - ä¸»è¦ Agent ç±»
  - `agent-loop.ts` - Agent æ‰§è¡Œå¾ªç¯
  - `claude-client.ts` - Claude API å®¢æˆ·ç«¯
- `tools/` - å·¥å…·å®ç°å±‚
  - æ¯ä¸ªå·¥å…·ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚ `file-edit.ts`, `code-analyzer.ts`
  - `base-tool.ts` - åŸºç¡€å·¥å…·æŠ½è±¡ç±»
  - `tool-registry.ts` - å·¥å…·æ³¨å†Œç®¡ç†
  - `tool-factory.ts` - å·¥å…·å·¥å‚
- `types/` - Agent ç›¸å…³ç±»å‹å®šä¹‰
- `utils/` - å·¥å…·å‡½æ•°
- `monitoring/` - ç›‘æ§å’Œæ€§èƒ½è¿½è¸ª

## ğŸ—ï¸ æ–‡ä»¶æ‹†åˆ†ç­–ç•¥

### ğŸ“¦ Hooks æ‹†åˆ†åŸåˆ™ (hooks/)

æŒ‰åŠŸèƒ½é¢†åŸŸç»„ç»‡ï¼Œæä¾›å¯å¤ç”¨çš„ä¸šåŠ¡é€»è¾‘ï¼š

```
hooks/
â”œâ”€â”€ index.ts                    # ç»Ÿä¸€å¯¼å‡º (Barrel Export)
â”œâ”€â”€ use-{feature}.ts           # åŠŸèƒ½ä¸»é€»è¾‘é›†æˆ
â”œâ”€â”€ use-{feature}-state.ts     # åŠŸèƒ½çŠ¶æ€ç®¡ç†
â”œâ”€â”€ use-{feature}-effects.ts   # åŠŸèƒ½å‰¯ä½œç”¨å¤„ç†
â”œâ”€â”€ use-{feature}-operations.ts # åŠŸèƒ½æ“ä½œé€»è¾‘
â”œâ”€â”€ use-{common-behavior}.ts   # é€šç”¨è¡Œä¸ºhooks
â””â”€â”€ use-{utility}.ts           # å·¥å…·ç±»hooks
```

**æ‹†åˆ†åŸåˆ™ï¼š**

- **ä¸»é€»è¾‘ Hook** (`use-{feature}.ts`): é›†æˆå¤šä¸ªå­ hooksï¼Œæä¾›ç»Ÿä¸€æ¥å£
- **çŠ¶æ€ç®¡ç† Hook** (`use-{feature}-state.ts`): ä¸“æ³¨çŠ¶æ€ç®¡ç†å’Œæ•°æ®æµ
- **å‰¯ä½œç”¨ Hook** (`use-{feature}-effects.ts`): å¤„ç† API è°ƒç”¨ã€äº‹ä»¶ç›‘å¬ç­‰
- **æ“ä½œ Hook** (`use-{feature}-operations.ts`): ä¸šåŠ¡æ“ä½œé€»è¾‘ï¼ˆå¢åˆ æ”¹æŸ¥ç­‰ï¼‰
- **é€šç”¨ Hook**: å¯è·¨åŠŸèƒ½æ¨¡å—å¤ç”¨çš„è¡Œä¸ºæ¨¡å¼
- **å·¥å…· Hook**: çº¯å·¥å…·ç±»åŠŸèƒ½ï¼Œæ— ä¸šåŠ¡é€»è¾‘

**å‘½åè§„èŒƒï¼š**

- ä¸»åŠŸèƒ½ï¼š`useFeatureName` (å¦‚ `useUserManagement`)
- å­åŠŸèƒ½ï¼š`useFeatureName + å…·ä½“èŒè´£` (å¦‚ `useUserManagementState`)
- é€šç”¨è¡Œä¸ºï¼š`use + è¡Œä¸ºæè¿°` (å¦‚ `useApiHealth`, `useScrollToBottom`)

### ğŸ§© ç»„ä»¶æ‹†åˆ†ç­–ç•¥ (app/components/)

#### ä¸‰å±‚ç»„ä»¶æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ“± Container Layer                       â”‚
â”‚            (ä¸šåŠ¡é€»è¾‘ + çŠ¶æ€ç®¡ç† + Hooké›†æˆ)                    â”‚
â”‚         {Feature}Manager, {Feature}Interface               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ props + handlers â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ğŸ§© Feature Layer                         â”‚
â”‚              (åŠŸèƒ½ç‰¹å®šUI + äº¤äº’é€»è¾‘)                          â”‚
â”‚     {Feature}Item, {Feature}Form, {Feature}Display        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ common patterns â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ¨ UI Layer                              â”‚
â”‚                (çº¯UIç»„ä»¶ + æ— ä¸šåŠ¡é€»è¾‘)                         â”‚
â”‚     Button, Modal, Input, Message, Loading                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### åŠŸèƒ½æ¨¡å—ç»„ä»¶ç»“æ„

```
app/components/{feature}/        # åŠŸèƒ½æ¨¡å—ç›®å½•
â”œâ”€â”€ {feature}-manager.tsx        # ğŸ—ï¸ å®¹å™¨ç»„ä»¶ - ä¸»å…¥å£
â”œâ”€â”€ {feature}-list.tsx          # ğŸ§© åŠŸèƒ½ç»„ä»¶ - åˆ—è¡¨å±•ç¤º
â”œâ”€â”€ {feature}-item.tsx          # ğŸ§© åŠŸèƒ½ç»„ä»¶ - å•é¡¹å±•ç¤º
â”œâ”€â”€ {feature}-form.tsx          # ğŸ§© åŠŸèƒ½ç»„ä»¶ - è¡¨å•æ“ä½œ
â”œâ”€â”€ {feature}-header.tsx        # ğŸ§© åŠŸèƒ½ç»„ä»¶ - å¤´éƒ¨ä¿¡æ¯
â”œâ”€â”€ {feature}-footer.tsx        # ğŸ§© åŠŸèƒ½ç»„ä»¶ - åº•éƒ¨ä¿¡æ¯
â”œâ”€â”€ {feature}-empty-state.tsx   # ğŸ§© åŠŸèƒ½ç»„ä»¶ - ç©ºçŠ¶æ€
â””â”€â”€ index.ts                    # ğŸ“¦ æ¨¡å—å¯¼å‡º
```

#### é€šç”¨ UI ç»„ä»¶ç»“æ„

```
app/components/ui/              # é€šç”¨UIç»„ä»¶ç›®å½•
â”œâ”€â”€ button.tsx                 # ğŸ¨ æŒ‰é’®ç»„ä»¶
â”œâ”€â”€ input.tsx                  # ğŸ¨ è¾“å…¥ç»„ä»¶
â”œâ”€â”€ modal.tsx                  # ğŸ¨ å¼¹çª—ç»„ä»¶
â”œâ”€â”€ message.tsx                # ğŸ¨ æ¶ˆæ¯ç»„ä»¶
â”œâ”€â”€ loading.tsx                # ğŸ¨ åŠ è½½ç»„ä»¶
â”œâ”€â”€ error-display.tsx          # ğŸ¨ é”™è¯¯æ˜¾ç¤º
â”œâ”€â”€ status-message.tsx         # ğŸ¨ çŠ¶æ€æ¶ˆæ¯
â””â”€â”€ index.ts                   # ğŸ“¦ é€šç”¨ç»„ä»¶å¯¼å‡º
```

### ğŸ“‚ æ–‡ä»¶æ”¾ç½®è§„åˆ™

#### ğŸ£ Hooks æ–‡ä»¶æ”¾ç½®

```typescript
// âœ… æ­£ç¡®æ”¾ç½®
hooks / use - user - management.ts; // ç”¨æˆ·ç®¡ç†ä¸»é€»è¾‘
hooks / use - user - management - state.ts; // ç”¨æˆ·çŠ¶æ€ç®¡ç†
hooks / use - user - management - operations.ts; // ç”¨æˆ·æ“ä½œé€»è¾‘
hooks / use - api - health.ts; // é€šç”¨APIå¥åº·æ£€æŸ¥
hooks / use - scroll - to - bottom.ts; // é€šç”¨æ»šåŠ¨è¡Œä¸º

// âŒ é”™è¯¯æ”¾ç½® - ä¸è¦æ”¾åœ¨ç»„ä»¶ç›®å½•ä¸‹
app / components / user / use - user - logic.ts;
```

#### ğŸ§© ç»„ä»¶æ–‡ä»¶æ”¾ç½®

```typescript
// âœ… åŠŸèƒ½ç»„ä»¶ - æ”¾åœ¨å¯¹åº”åŠŸèƒ½æ¨¡å—ä¸‹
app/components/user-management/
  â”œâ”€â”€ user-management-interface.tsx   // å®¹å™¨ç»„ä»¶
  â”œâ”€â”€ user-list.tsx                  // ç”¨æˆ·åˆ—è¡¨
  â”œâ”€â”€ user-item.tsx                  // ç”¨æˆ·æ¡ç›®
  â”œâ”€â”€ user-form.tsx                  // ç”¨æˆ·è¡¨å•
  â””â”€â”€ index.ts

// âœ… é€šç”¨UIç»„ä»¶ - æ”¾åœ¨uiç›®å½•ä¸‹
app/components/ui/
  â”œâ”€â”€ data-table.tsx                 // é€šç”¨æ•°æ®è¡¨æ ¼
  â”œâ”€â”€ form-input.tsx                 # é€šç”¨è¡¨å•è¾“å…¥
  â”œâ”€â”€ status-badge.tsx               # é€šç”¨çŠ¶æ€å¾½ç« 
  â””â”€â”€ index.ts

// âŒ é”™è¯¯æ”¾ç½® - ä¸šåŠ¡ç»„ä»¶ä¸è¦æ”¾åœ¨uiç›®å½•
app/components/ui/user-profile.tsx  # ç”¨æˆ·èµ„æ–™ç»„ä»¶åº”è¯¥æ”¾åœ¨useræ¨¡å—ä¸‹
```

#### ğŸ”§ æœåŠ¡æ–‡ä»¶æ”¾ç½®

```typescript
// âœ… ä¸šåŠ¡æœåŠ¡ - æ”¾åœ¨lib/servicesä¸‹
lib / services / user - service.ts; // ç”¨æˆ·ä¸šåŠ¡æœåŠ¡
lib / services / data - service.ts; // æ•°æ®æœåŠ¡
lib / services / auth - service.ts; // è®¤è¯æœåŠ¡

// âœ… å·¥å…·å‡½æ•° - æ”¾åœ¨lib/utilsä¸‹
lib / utils / date - formatter.ts; // æ—¥æœŸæ ¼å¼åŒ–å·¥å…·
lib / utils / validation.ts; // éªŒè¯å·¥å…·
lib / utils / api - client.ts; // APIå®¢æˆ·ç«¯å·¥å…·
```

#### ğŸ“ ç±»å‹å®šä¹‰æ”¾ç½®

```typescript
// âœ… å…¨å±€ç±»å‹ - æ”¾åœ¨typesç›®å½•
types / user.ts; // ç”¨æˆ·ç›¸å…³ç±»å‹
types / api.ts; // APIç›¸å…³ç±»å‹
types / common.ts; // é€šç”¨ç±»å‹

// âœ… ç»„ä»¶ä¸“ç”¨ç±»å‹ - å°±è¿‘æ”¾ç½®
app / components / user / types.ts; // ç”¨æˆ·ç»„ä»¶ä¸“ç”¨ç±»å‹
hooks / types.ts; // Hooksä¸“ç”¨ç±»å‹
```

## ğŸ¯ æ–‡ä»¶æ‹†åˆ†å†³ç­–æŒ‡å—

### ä½•æ—¶æ‹†åˆ† Hookï¼Ÿ

```typescript
// âŒ å•ä¸€Hookè¿‡äºå¤æ‚
export function useComplexFeature() {
  // 100+ è¡ŒçŠ¶æ€ç®¡ç†
  // 50+ è¡ŒAPIè°ƒç”¨é€»è¾‘
  // 30+ è¡Œå‰¯ä½œç”¨å¤„ç†
  // è¿™ä¸ªHookåšå¤ªå¤šäº‹æƒ…äº†ï¼
}

// âœ… æ‹†åˆ†ä¸ºå¤šä¸ªä¸“é—¨Hook
export function useFeature() {
  const state = useFeatureState();
  const operations = useFeatureOperations(state);
  const effects = useFeatureEffects(state);

  return { ...state, ...operations, ...effects };
}
```

### ä½•æ—¶æ‹†åˆ†ç»„ä»¶ï¼Ÿ

```typescript
// âŒ å•ä¸€ç»„ä»¶è¿‡äºå¤æ‚
export function ComplexComponent() {
  // 200+ è¡ŒJSX
  // 20+ ä¸ªstateå˜é‡
  // 10+ ä¸ªevent handler
  // è¿™ä¸ªç»„ä»¶èŒè´£å¤ªå¤šäº†ï¼
}

// âœ… æ‹†åˆ†ä¸ºå®¹å™¨ç»„ä»¶ + å­ç»„ä»¶
export function FeatureManager() {
  const logic = useFeature();
  return (
    <div>
      <FeatureHeader {...logic.headerProps} />
      <FeatureContent {...logic.contentProps} />
      <FeatureFooter {...logic.footerProps} />
    </div>
  );
}
```

### ä½•æ—¶åˆ›å»ºæ–°çš„åŠŸèƒ½æ¨¡å—ï¼Ÿ

```typescript
// âœ… åˆ›å»ºæ–°åŠŸèƒ½æ¨¡å—çš„æ¡ä»¶
- æœ‰ç‹¬ç«‹çš„ä¸šåŠ¡é¢†åŸŸæ¦‚å¿µ (å¦‚ï¼šç”¨æˆ·ç®¡ç†ã€è®¢å•å¤„ç†ã€å†…å®¹ç®¡ç†)
- æœ‰ 3+ ä¸ªç›¸å…³ç»„ä»¶
- æœ‰ä¸“é—¨çš„æ•°æ®æ¨¡å‹å’Œä¸šåŠ¡é€»è¾‘
- å¯ä»¥ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•

// âŒ ä¸éœ€è¦åˆ›å»ºæ–°æ¨¡å—çš„æƒ…å†µ
- åªæœ‰1-2ä¸ªç®€å•ç»„ä»¶
- æ²¡æœ‰ç‹¬ç«‹çš„ä¸šåŠ¡é€»è¾‘
- åªæ˜¯UIå˜åŒ–ï¼Œæ²¡æœ‰æ•°æ®æ¨¡å‹
```

## ğŸ”§ å‘½åçº¦å®š

### ğŸ“‚ ç›®å½•å‘½å

```bash
# âœ… åŠŸèƒ½æ¨¡å—ç›®å½• - kebab-case
app/components/user-management/
app/components/order-processing/
app/components/content-editing/

# âœ… é€šç”¨ç›®å½• - å•æ•°åè¯
app/components/ui/
hooks/
types/
```

### ğŸ“„ æ–‡ä»¶å‘½å

```bash
# âœ… ç»„ä»¶æ–‡ä»¶ - kebab-case
user-management-interface.tsx
order-item-card.tsx
content-editor.tsx

# âœ… Hookæ–‡ä»¶ - kebab-case
use-user-management.ts
use-api-health.ts
use-form-validation.ts

# âœ… æœåŠ¡æ–‡ä»¶ - kebab-case
user-service.ts
data-service.ts
```

### ğŸ·ï¸ ç»„ä»¶å’Œ Hook å‘½å

```typescript
// âœ… ç»„ä»¶å‘½å - PascalCase
export function UserManagementInterface() {}
export function OrderItemCard() {}
export function ContentEditor() {}

// âœ… Hookå‘½å - camelCase with use prefix
export function useUserManagement() {}
export function useApiHealth() {}
export function useFormValidation() {}

// âœ… ç±»å‹å‘½å - PascalCase
interface UserData {}
type OrderStatus = "pending" | "completed";
```

## ğŸ“‹ æ–‡ä»¶ç»„ç»‡æ£€æŸ¥æ¸…å•

### âœ… Hook æ–‡ä»¶æ£€æŸ¥

- [ ] æ¯ä¸ª Hook ä¸“æ³¨å•ä¸€èŒè´£
- [ ] ä¸» Hook ä¸è¶…è¿‡ 150 è¡Œä»£ç 
- [ ] å¤æ‚ Hook å·²æ‹†åˆ†ä¸ºå­ Hook
- [ ] æ‰€æœ‰ Hook éƒ½æœ‰æ˜ç¡®çš„è¿”å›ç±»å‹
- [ ] Hook æ–‡ä»¶æ”¾åœ¨ `hooks/` ç›®å½•ä¸‹

### âœ… ç»„ä»¶æ–‡ä»¶æ£€æŸ¥

- [ ] å®¹å™¨ç»„ä»¶åªè´Ÿè´£é€»è¾‘ç¼–æ’
- [ ] åŠŸèƒ½ç»„ä»¶ä¸“æ³¨ç‰¹å®š UI åŠŸèƒ½
- [ ] UI ç»„ä»¶æ— ä¸šåŠ¡é€»è¾‘ï¼Œé«˜åº¦å¯å¤ç”¨
- [ ] å•ä¸ªç»„ä»¶ä¸è¶…è¿‡ 200 è¡Œä»£ç 
- [ ] ç»„ä»¶æ–‡ä»¶æ”¾åœ¨æ­£ç¡®çš„ç›®å½•ä¸‹

### âœ… ç›®å½•ç»“æ„æ£€æŸ¥

- [ ] æ¯ä¸ªåŠŸèƒ½æ¨¡å—æœ‰è‡ªå·±çš„ç›®å½•
- [ ] UI ç»„ä»¶ç»Ÿä¸€æ”¾åœ¨ `ui/` ç›®å½•
- [ ] Hook ç»Ÿä¸€æ”¾åœ¨ `hooks/` ç›®å½•
- [ ] æ¯ä¸ªæ¨¡å—éƒ½æœ‰ `index.ts` å¯¼å‡ºæ–‡ä»¶
- [ ] ç›®å½•åµŒå¥—ä¸è¶…è¿‡ 3 å±‚

### âœ… å‘½åè§„èŒƒæ£€æŸ¥

- [ ] ç›®å½•åä½¿ç”¨ kebab-case
- [ ] æ–‡ä»¶åä½¿ç”¨ kebab-case
- [ ] ç»„ä»¶åä½¿ç”¨ PascalCase
- [ ] Hook åä½¿ç”¨ camelCase + use å‰ç¼€
- [ ] ç±»å‹åä½¿ç”¨ PascalCase

---

_éµå¾ªè¿™äº›æ–‡ä»¶æ‹†åˆ†å’Œç»„ç»‡è§„èŒƒï¼Œæ„å»ºæ¸…æ™°ã€å¯ç»´æŠ¤çš„é¡¹ç›®ç»“æ„ï¼_ âœ¨(â—¦'ãƒ®'â—¦)âœ¨

# Prism Code Agent é¡¹ç›®è§„èŒƒ

## ğŸ“ ç›®å½•ç»“æ„è§„èŒƒ

### æ ¸å¿ƒç›®å½•è¯´æ˜

- `app/` - Next.js åº”ç”¨å±‚ï¼ŒåŒ…å«é¡µé¢ã€API è·¯ç”±å’Œç»„ä»¶
  - `components/` - React ç»„ä»¶ï¼ŒæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ **(éµå¾ªé¢†åŸŸé©±åŠ¨è®¾è®¡)**
    - `{feature}/` - åŠŸèƒ½æ¨¡å—ç»„ä»¶ **(æŒ‰ä¸šåŠ¡é¢†åŸŸåˆ†ç»„)**
    - `ui/` - é€šç”¨å¯å¤ç”¨ UI ç»„ä»¶ **(æ— ä¸šåŠ¡é€»è¾‘çš„çº¯ UI ç»„ä»¶)**
  - `api/` - API è·¯ç”±å¤„ç†å™¨
  - `pages/` - é¡µé¢çº§ç»„ä»¶å’Œè·¯ç”±
- `lib/` - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘åº“ï¼ŒåŒ…å«å¯å¤ç”¨çš„æœåŠ¡å’Œå·¥å…·
- `hooks/` - è‡ªå®šä¹‰ React Hooksï¼Œåˆ†ç¦»ä¸šåŠ¡é€»è¾‘ **(é€»è¾‘å±‚)**
- `config/` - é…ç½®æ–‡ä»¶ï¼Œå¦‚æ•°æ®åº“è¿æ¥ã€API é…ç½®ç­‰
- `types/` - å…¨å±€ TypeScript ç±»å‹å®šä¹‰
- `docs/` - é¡¹ç›®æ–‡æ¡£
- `public/` - é™æ€èµ„æºæ–‡ä»¶

### Agent æœåŠ¡æ¶æ„ (lib/services/agent/)

- `core/` - æ ¸å¿ƒå®ç°
  - `agent.ts` - ä¸»è¦ Agent ç±»
  - `agent-loop.ts` - Agent æ‰§è¡Œå¾ªç¯
  - `claude-client.ts` - Claude API å®¢æˆ·ç«¯
- `tools/` - å·¥å…·å®ç°å±‚
  - æ¯ä¸ªå·¥å…·ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚ `file-edit.ts`, `code-analyzer.ts`
  - `base-tool.ts` - åŸºç¡€å·¥å…·æŠ½è±¡ç±»
  - `tool-registry.ts` - å·¥å…·æ³¨å†Œç®¡ç†
  - `tool-factory.ts` - å·¥å…·å·¥å‚
- `types/` - Agent ç›¸å…³ç±»å‹å®šä¹‰
- `utils/` - å·¥å…·å‡½æ•°
- `monitoring/` - ç›‘æ§å’Œæ€§èƒ½è¿½è¸ª

## ğŸ—ï¸ æ–‡ä»¶æ‹†åˆ†ç­–ç•¥

### ğŸ“¦ Hooks æ‹†åˆ†åŸåˆ™ (hooks/)

æŒ‰åŠŸèƒ½é¢†åŸŸç»„ç»‡ï¼Œæä¾›å¯å¤ç”¨çš„ä¸šåŠ¡é€»è¾‘ï¼š

```
hooks/
â”œâ”€â”€ index.ts                    # ç»Ÿä¸€å¯¼å‡º (Barrel Export)
â”œâ”€â”€ use-{feature}.ts           # åŠŸèƒ½ä¸»é€»è¾‘é›†æˆ
â”œâ”€â”€ use-{feature}-state.ts     # åŠŸèƒ½çŠ¶æ€ç®¡ç†
â”œâ”€â”€ use-{feature}-effects.ts   # åŠŸèƒ½å‰¯ä½œç”¨å¤„ç†
â”œâ”€â”€ use-{feature}-operations.ts # åŠŸèƒ½æ“ä½œé€»è¾‘
â”œâ”€â”€ use-{common-behavior}.ts   # é€šç”¨è¡Œä¸ºhooks
â””â”€â”€ use-{utility}.ts           # å·¥å…·ç±»hooks
```

**æ‹†åˆ†åŸåˆ™ï¼š**

- **ä¸»é€»è¾‘ Hook** (`use-{feature}.ts`): é›†æˆå¤šä¸ªå­ hooksï¼Œæä¾›ç»Ÿä¸€æ¥å£
- **çŠ¶æ€ç®¡ç† Hook** (`use-{feature}-state.ts`): ä¸“æ³¨çŠ¶æ€ç®¡ç†å’Œæ•°æ®æµ
- **å‰¯ä½œç”¨ Hook** (`use-{feature}-effects.ts`): å¤„ç† API è°ƒç”¨ã€äº‹ä»¶ç›‘å¬ç­‰
- **æ“ä½œ Hook** (`use-{feature}-operations.ts`): ä¸šåŠ¡æ“ä½œé€»è¾‘ï¼ˆå¢åˆ æ”¹æŸ¥ç­‰ï¼‰
- **é€šç”¨ Hook**: å¯è·¨åŠŸèƒ½æ¨¡å—å¤ç”¨çš„è¡Œä¸ºæ¨¡å¼
- **å·¥å…· Hook**: çº¯å·¥å…·ç±»åŠŸèƒ½ï¼Œæ— ä¸šåŠ¡é€»è¾‘

**å‘½åè§„èŒƒï¼š**

- ä¸»åŠŸèƒ½ï¼š`useFeatureName` (å¦‚ `useUserManagement`)
- å­åŠŸèƒ½ï¼š`useFeatureName + å…·ä½“èŒè´£` (å¦‚ `useUserManagementState`)
- é€šç”¨è¡Œä¸ºï¼š`use + è¡Œä¸ºæè¿°` (å¦‚ `useApiHealth`, `useScrollToBottom`)

### ğŸ§© ç»„ä»¶æ‹†åˆ†ç­–ç•¥ (app/components/)

#### ä¸‰å±‚ç»„ä»¶æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ“± Container Layer                       â”‚
â”‚            (ä¸šåŠ¡é€»è¾‘ + çŠ¶æ€ç®¡ç† + Hooké›†æˆ)                    â”‚
â”‚         {Feature}Manager, {Feature}Interface               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ props + handlers â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ğŸ§© Feature Layer                         â”‚
â”‚              (åŠŸèƒ½ç‰¹å®šUI + äº¤äº’é€»è¾‘)                          â”‚
â”‚     {Feature}Item, {Feature}Form, {Feature}Display        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ common patterns â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ¨ UI Layer                              â”‚
â”‚                (çº¯UIç»„ä»¶ + æ— ä¸šåŠ¡é€»è¾‘)                         â”‚
â”‚     Button, Modal, Input, Message, Loading                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### åŠŸèƒ½æ¨¡å—ç»„ä»¶ç»“æ„

```
app/components/{feature}/        # åŠŸèƒ½æ¨¡å—ç›®å½•
â”œâ”€â”€ {feature}-manager.tsx        # ğŸ—ï¸ å®¹å™¨ç»„ä»¶ - ä¸»å…¥å£
â”œâ”€â”€ {feature}-list.tsx          # ğŸ§© åŠŸèƒ½ç»„ä»¶ - åˆ—è¡¨å±•ç¤º
â”œâ”€â”€ {feature}-item.tsx          # ğŸ§© åŠŸèƒ½ç»„ä»¶ - å•é¡¹å±•ç¤º
â”œâ”€â”€ {feature}-form.tsx          # ğŸ§© åŠŸèƒ½ç»„ä»¶ - è¡¨å•æ“ä½œ
â”œâ”€â”€ {feature}-header.tsx        # ğŸ§© åŠŸèƒ½ç»„ä»¶ - å¤´éƒ¨ä¿¡æ¯
â”œâ”€â”€ {feature}-footer.tsx        # ğŸ§© åŠŸèƒ½ç»„ä»¶ - åº•éƒ¨ä¿¡æ¯
â”œâ”€â”€ {feature}-empty-state.tsx   # ğŸ§© åŠŸèƒ½ç»„ä»¶ - ç©ºçŠ¶æ€
â””â”€â”€ index.ts                    # ğŸ“¦ æ¨¡å—å¯¼å‡º
```

#### é€šç”¨ UI ç»„ä»¶ç»“æ„

```
app/components/ui/              # é€šç”¨UIç»„ä»¶ç›®å½•
â”œâ”€â”€ button.tsx                 # ğŸ¨ æŒ‰é’®ç»„ä»¶
â”œâ”€â”€ input.tsx                  # ğŸ¨ è¾“å…¥ç»„ä»¶
â”œâ”€â”€ modal.tsx                  # ğŸ¨ å¼¹çª—ç»„ä»¶
â”œâ”€â”€ message.tsx                # ğŸ¨ æ¶ˆæ¯ç»„ä»¶
â”œâ”€â”€ loading.tsx                # ğŸ¨ åŠ è½½ç»„ä»¶
â”œâ”€â”€ error-display.tsx          # ğŸ¨ é”™è¯¯æ˜¾ç¤º
â”œâ”€â”€ status-message.tsx         # ğŸ¨ çŠ¶æ€æ¶ˆæ¯
â””â”€â”€ index.ts                   # ğŸ“¦ é€šç”¨ç»„ä»¶å¯¼å‡º
```

### ğŸ“‚ æ–‡ä»¶æ”¾ç½®è§„åˆ™

#### ğŸ£ Hooks æ–‡ä»¶æ”¾ç½®

```typescript
// âœ… æ­£ç¡®æ”¾ç½®
hooks / use - user - management.ts; // ç”¨æˆ·ç®¡ç†ä¸»é€»è¾‘
hooks / use - user - management - state.ts; // ç”¨æˆ·çŠ¶æ€ç®¡ç†
hooks / use - user - management - operations.ts; // ç”¨æˆ·æ“ä½œé€»è¾‘
hooks / use - api - health.ts; // é€šç”¨APIå¥åº·æ£€æŸ¥
hooks / use - scroll - to - bottom.ts; // é€šç”¨æ»šåŠ¨è¡Œä¸º

// âŒ é”™è¯¯æ”¾ç½® - ä¸è¦æ”¾åœ¨ç»„ä»¶ç›®å½•ä¸‹
app / components / user / use - user - logic.ts;
```

#### ğŸ§© ç»„ä»¶æ–‡ä»¶æ”¾ç½®

```typescript
// âœ… åŠŸèƒ½ç»„ä»¶ - æ”¾åœ¨å¯¹åº”åŠŸèƒ½æ¨¡å—ä¸‹
app/components/user-management/
  â”œâ”€â”€ user-management-interface.tsx   // å®¹å™¨ç»„ä»¶
  â”œâ”€â”€ user-list.tsx                  // ç”¨æˆ·åˆ—è¡¨
  â”œâ”€â”€ user-item.tsx                  // ç”¨æˆ·æ¡ç›®
  â”œâ”€â”€ user-form.tsx                  // ç”¨æˆ·è¡¨å•
  â””â”€â”€ index.ts

// âœ… é€šç”¨UIç»„ä»¶ - æ”¾åœ¨uiç›®å½•ä¸‹
app/components/ui/
  â”œâ”€â”€ data-table.tsx                 // é€šç”¨æ•°æ®è¡¨æ ¼
  â”œâ”€â”€ form-input.tsx                 # é€šç”¨è¡¨å•è¾“å…¥
  â”œâ”€â”€ status-badge.tsx               # é€šç”¨çŠ¶æ€å¾½ç« 
  â””â”€â”€ index.ts

// âŒ é”™è¯¯æ”¾ç½® - ä¸šåŠ¡ç»„ä»¶ä¸è¦æ”¾åœ¨uiç›®å½•
app/components/ui/user-profile.tsx  # ç”¨æˆ·èµ„æ–™ç»„ä»¶åº”è¯¥æ”¾åœ¨useræ¨¡å—ä¸‹
```

#### ğŸ”§ æœåŠ¡æ–‡ä»¶æ”¾ç½®

```typescript
// âœ… ä¸šåŠ¡æœåŠ¡ - æ”¾åœ¨lib/servicesä¸‹
lib / services / user - service.ts; // ç”¨æˆ·ä¸šåŠ¡æœåŠ¡
lib / services / data - service.ts; // æ•°æ®æœåŠ¡
lib / services / auth - service.ts; // è®¤è¯æœåŠ¡

// âœ… å·¥å…·å‡½æ•° - æ”¾åœ¨lib/utilsä¸‹
lib / utils / date - formatter.ts; // æ—¥æœŸæ ¼å¼åŒ–å·¥å…·
lib / utils / validation.ts; // éªŒè¯å·¥å…·
lib / utils / api - client.ts; // APIå®¢æˆ·ç«¯å·¥å…·
```

#### ğŸ“ ç±»å‹å®šä¹‰æ”¾ç½®

```typescript
// âœ… å…¨å±€ç±»å‹ - æ”¾åœ¨typesç›®å½•
types / user.ts; // ç”¨æˆ·ç›¸å…³ç±»å‹
types / api.ts; // APIç›¸å…³ç±»å‹
types / common.ts; // é€šç”¨ç±»å‹

// âœ… ç»„ä»¶ä¸“ç”¨ç±»å‹ - å°±è¿‘æ”¾ç½®
app / components / user / types.ts; // ç”¨æˆ·ç»„ä»¶ä¸“ç”¨ç±»å‹
hooks / types.ts; // Hooksä¸“ç”¨ç±»å‹
```

## ğŸ¯ æ–‡ä»¶æ‹†åˆ†å†³ç­–æŒ‡å—

### ä½•æ—¶æ‹†åˆ† Hookï¼Ÿ

```typescript
// âŒ å•ä¸€Hookè¿‡äºå¤æ‚
export function useComplexFeature() {
  // 100+ è¡ŒçŠ¶æ€ç®¡ç†
  // 50+ è¡ŒAPIè°ƒç”¨é€»è¾‘
  // 30+ è¡Œå‰¯ä½œç”¨å¤„ç†
  // è¿™ä¸ªHookåšå¤ªå¤šäº‹æƒ…äº†ï¼
}

// âœ… æ‹†åˆ†ä¸ºå¤šä¸ªä¸“é—¨Hook
export function useFeature() {
  const state = useFeatureState();
  const operations = useFeatureOperations(state);
  const effects = useFeatureEffects(state);

  return { ...state, ...operations, ...effects };
}
```

### ä½•æ—¶æ‹†åˆ†ç»„ä»¶ï¼Ÿ

```typescript
// âŒ å•ä¸€ç»„ä»¶è¿‡äºå¤æ‚
export function ComplexComponent() {
  // 200+ è¡ŒJSX
  // 20+ ä¸ªstateå˜é‡
  // 10+ ä¸ªevent handler
  // è¿™ä¸ªç»„ä»¶èŒè´£å¤ªå¤šäº†ï¼
}

// âœ… æ‹†åˆ†ä¸ºå®¹å™¨ç»„ä»¶ + å­ç»„ä»¶
export function FeatureManager() {
  const logic = useFeature();
  return (
    <div>
      <FeatureHeader {...logic.headerProps} />
      <FeatureContent {...logic.contentProps} />
      <FeatureFooter {...logic.footerProps} />
    </div>
  );
}
```

### ä½•æ—¶åˆ›å»ºæ–°çš„åŠŸèƒ½æ¨¡å—ï¼Ÿ

```typescript
// âœ… åˆ›å»ºæ–°åŠŸèƒ½æ¨¡å—çš„æ¡ä»¶
- æœ‰ç‹¬ç«‹çš„ä¸šåŠ¡é¢†åŸŸæ¦‚å¿µ (å¦‚ï¼šç”¨æˆ·ç®¡ç†ã€è®¢å•å¤„ç†ã€å†…å®¹ç®¡ç†)
- æœ‰ 3+ ä¸ªç›¸å…³ç»„ä»¶
- æœ‰ä¸“é—¨çš„æ•°æ®æ¨¡å‹å’Œä¸šåŠ¡é€»è¾‘
- å¯ä»¥ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•

// âŒ ä¸éœ€è¦åˆ›å»ºæ–°æ¨¡å—çš„æƒ…å†µ
- åªæœ‰1-2ä¸ªç®€å•ç»„ä»¶
- æ²¡æœ‰ç‹¬ç«‹çš„ä¸šåŠ¡é€»è¾‘
- åªæ˜¯UIå˜åŒ–ï¼Œæ²¡æœ‰æ•°æ®æ¨¡å‹
```

## ğŸ”§ å‘½åçº¦å®š

### ğŸ“‚ ç›®å½•å‘½å

```bash
# âœ… åŠŸèƒ½æ¨¡å—ç›®å½• - kebab-case
app/components/user-management/
app/components/order-processing/
app/components/content-editing/

# âœ… é€šç”¨ç›®å½• - å•æ•°åè¯
app/components/ui/
hooks/
types/
```

### ğŸ“„ æ–‡ä»¶å‘½å

```bash
# âœ… ç»„ä»¶æ–‡ä»¶ - kebab-case
user-management-interface.tsx
order-item-card.tsx
content-editor.tsx

# âœ… Hookæ–‡ä»¶ - kebab-case
use-user-management.ts
use-api-health.ts
use-form-validation.ts

# âœ… æœåŠ¡æ–‡ä»¶ - kebab-case
user-service.ts
data-service.ts
```

### ğŸ·ï¸ ç»„ä»¶å’Œ Hook å‘½å

```typescript
// âœ… ç»„ä»¶å‘½å - PascalCase
export function UserManagementInterface() {}
export function OrderItemCard() {}
export function ContentEditor() {}

// âœ… Hookå‘½å - camelCase with use prefix
export function useUserManagement() {}
export function useApiHealth() {}
export function useFormValidation() {}

// âœ… ç±»å‹å‘½å - PascalCase
interface UserData {}
type OrderStatus = "pending" | "completed";
```

## ğŸ“‹ æ–‡ä»¶ç»„ç»‡æ£€æŸ¥æ¸…å•

### âœ… Hook æ–‡ä»¶æ£€æŸ¥

- [ ] æ¯ä¸ª Hook ä¸“æ³¨å•ä¸€èŒè´£
- [ ] ä¸» Hook ä¸è¶…è¿‡ 150 è¡Œä»£ç 
- [ ] å¤æ‚ Hook å·²æ‹†åˆ†ä¸ºå­ Hook
- [ ] æ‰€æœ‰ Hook éƒ½æœ‰æ˜ç¡®çš„è¿”å›ç±»å‹
- [ ] Hook æ–‡ä»¶æ”¾åœ¨ `hooks/` ç›®å½•ä¸‹

### âœ… ç»„ä»¶æ–‡ä»¶æ£€æŸ¥

- [ ] å®¹å™¨ç»„ä»¶åªè´Ÿè´£é€»è¾‘ç¼–æ’
- [ ] åŠŸèƒ½ç»„ä»¶ä¸“æ³¨ç‰¹å®š UI åŠŸèƒ½
- [ ] UI ç»„ä»¶æ— ä¸šåŠ¡é€»è¾‘ï¼Œé«˜åº¦å¯å¤ç”¨
- [ ] å•ä¸ªç»„ä»¶ä¸è¶…è¿‡ 200 è¡Œä»£ç 
- [ ] ç»„ä»¶æ–‡ä»¶æ”¾åœ¨æ­£ç¡®çš„ç›®å½•ä¸‹

### âœ… ç›®å½•ç»“æ„æ£€æŸ¥

- [ ] æ¯ä¸ªåŠŸèƒ½æ¨¡å—æœ‰è‡ªå·±çš„ç›®å½•
- [ ] UI ç»„ä»¶ç»Ÿä¸€æ”¾åœ¨ `ui/` ç›®å½•
- [ ] Hook ç»Ÿä¸€æ”¾åœ¨ `hooks/` ç›®å½•
- [ ] æ¯ä¸ªæ¨¡å—éƒ½æœ‰ `index.ts` å¯¼å‡ºæ–‡ä»¶
- [ ] ç›®å½•åµŒå¥—ä¸è¶…è¿‡ 3 å±‚

### âœ… å‘½åè§„èŒƒæ£€æŸ¥

- [ ] ç›®å½•åä½¿ç”¨ kebab-case
- [ ] æ–‡ä»¶åä½¿ç”¨ kebab-case
- [ ] ç»„ä»¶åä½¿ç”¨ PascalCase
- [ ] Hook åä½¿ç”¨ camelCase + use å‰ç¼€
- [ ] ç±»å‹åä½¿ç”¨ PascalCase

---

_éµå¾ªè¿™äº›æ–‡ä»¶æ‹†åˆ†å’Œç»„ç»‡è§„èŒƒï¼Œæ„å»ºæ¸…æ™°ã€å¯ç»´æŠ¤çš„é¡¹ç›®ç»“æ„ï¼_ âœ¨(â—¦'ãƒ®'â—¦)âœ¨
